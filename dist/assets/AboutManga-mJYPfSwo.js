import{j as s,c as m,l as n,p as u,r as C,g as M}from"./index-BBOIb04p.js";import{D as j,S as g}from"./manga.page-SyUy5xbT.js";import{P as N}from"./progress-D5Egr4mU.js";import{H as h}from"./heading-B3JxPwrU.js";import{S as p}from"./skeleton-F-vBBr6W.js";import{b as B}from"./dropdown-menu-DRJNkDcN.js";import{u as I,B as L,T as R,C as A}from"./text-disclosure-OeiLiFFg.js";import{C as E,a as G,b,c as H,d as D}from"./tabs-O7DyeGUv.js";import{a as P,b as d,H as Q,c as T,B as _}from"./badge-3VicvAqn.js";import{t as x}from"./toShortcutNumber-YP-LK2qN.js";import{E as q}from"./eye-D3T0eukC.js";import"./button-CBBu9zPz.js";import{u as F,b as O}from"./AddMangaToBookmarks-Bij2xwiY.js";import"./Page-BJCJSSRi.js";import"./Container-RGPOtVEF.js";import"./dialog-B9HZAobp.js";import"./index-DQY5oi3q.js";import"./index-B52u3quG.js";import"./separator-9rsH-1Uw.js";import"./ToggleOrder-DiWLjHYt.js";import"./useClearInfinityPages-Cbng7GPd.js";import"./parseISO-D8VFmm5E.js";import"./en-US-COFYzLpy.js";import"./useDebounce-eOa9egCm.js";import"./ru-CK6oagpa.js";import"./useTrottle-DRV-miGT.js";import"./input-COoXHJLR.js";import"./AppAdaptiveImage-DudC7i5n.js";import"./index-Cnn0Zpd9.js";import"./types-BAOhVOD-.js";import"./index-Dq4Dv7nz.js";import"./index-Bg1MQUgi.js";import"./BookMetaLinks-Bxlc_SFV.js";import"./arrow-right-zTTAi922.js";const z=l=>{const{className:t,rateStatistic:e,bookmarkStatistic:a,children:c}=l;return s.jsxs("div",{className:m("flex flex-col gap-4 w-full",t),children:[c,s.jsxs("div",{className:m("px-4 flex gap-4 ",n.isMobile?"flex-col items-center":"items-start justify-center max-[991px]:flex-wrap"),children:[s.jsx(j,{asChild:!0,className:m(n.isMobile?"w-full":"basis-[50%] max-[991px]:basis-[100%]"),children:e}),s.jsx(j,{asChild:!0,className:m(n.isMobile?"w-full":"basis-[50%] max-[991px]:basis-[100%]"),children:a})]})]})};function J(l){const{data:t,isLoading:e}=u.useQuery("get","/manga/statistic/{id}/rate",{params:{path:{id:String(l)}}});return{data:t,isLoading:e}}const K=l=>{const{className:t,mangaId:e}=l,{data:a,isLoading:c}=J(e),i=C.useMemo(()=>{var r;return((r=a==null?void 0:a.rateStatistic)==null?void 0:r.reverse())||[]},[a==null?void 0:a.rateStatistic]);return s.jsxs("div",{className:t,children:[s.jsxs(h,{variant:"h3",color:"primary",className:"mb-1",children:["Общая оценка ",(a==null?void 0:a.rate)||"??"," от ",(a==null?void 0:a.rateCount)||"??"," пользователей"]}),s.jsxs("div",{className:"table",children:[i.map(r=>s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"table-cell px-2 py-1.5",children:r.title}),s.jsx("div",{className:"table-cell align-middle",children:s.jsx(g,{className:"stroke-primary fill-primary p-1"})}),s.jsx("div",{className:"table-cell px-2 py-1.5 w-full",children:s.jsx(N,{value:r.percentage})}),s.jsxs("div",{className:"table-cell px-2 py-1.5",children:[r.percentage,"%"]}),s.jsx("div",{className:"table-cell px-2 py-1.5",children:r.count})]},r.title)),c&&Array(10).fill(0).map((r,o)=>s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"table-cell px-2 py-1.5",children:10-o}),s.jsx("div",{className:"table-cell align-middle",children:s.jsx(g,{className:"stroke-primary fill-primary p-1"})}),s.jsx("div",{className:"table-cell px-2 py-1.5 w-full",children:s.jsx(p,{className:"w-full h-4"})}),s.jsx("div",{className:"table-cell px-2 py-1.5",children:s.jsx(p,{className:"w-20 h-4"})})]},o))]})]})};function U(l){const{data:t,isLoading:e}=u.useQuery("get","/manga/statistic/{id}/bookmark",{params:{path:{id:String(l)}}});return{data:t,isLoading:e}}const V=l=>{const{className:t,mangaId:e}=l,{data:a,isLoading:c}=U(e);return s.jsxs("div",{className:t,children:[s.jsxs(h,{variant:"h3",color:"primary",className:"mb-1",children:["В закладках у ",(a==null?void 0:a.all)||"??"," пользователей"]}),s.jsxs("div",{className:"table",children:[a&&a.bookmarks.map(i=>s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"table-cell px-2 py-1.5",children:i.title}),s.jsx("div",{className:"table-cell px-2 py-1.5 w-full",children:s.jsx(N,{value:i.percentage})}),s.jsxs("div",{className:"table-cell px-2 py-1.5",children:[i.percentage,"%"]}),s.jsx("div",{className:"table-cell px-2 py-1.5 text-xs",children:i.count})]},i.title)),c&&Object.values(B).map(i=>s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"table-cell px-2 py-1.5",children:i}),s.jsx("div",{className:"table-cell px-2 py-1.5 w-full",children:s.jsx(p,{className:"w-full h-4"})}),s.jsx("div",{className:"table-cell px-2 py-1.5",children:s.jsx(p,{className:"w-20 h-4"})})]},i))]})]})};function W(l){const{data:t,isLoading:e}=u.useQuery("get","/manga/related/{id}",{params:{path:{id:String(l)}}});return{data:t==null?void 0:t.data,isLoading:e}}const X=l=>{const{className:t,mangaId:e,heading:a}=l,{data:c=[],isLoading:i}=W(e);return!i&&!c.length?null:s.jsxs("div",{className:t,children:[a,s.jsxs(E,{opts:{dragFree:!0},className:"w-full relative group",children:[s.jsxs(G,{className:"pl-2.5",children:[c.map(({urlId:r,cover:o,title:v,type:f,likes:y,views:k,bookmarks:S},w)=>s.jsx(b,{className:"basis-75 ml-2 px-1 py-1 bg-card flex rounded-xl border shadow-sm",children:s.jsx(P,{to:M.MANGA(r),title:v,subtitle:f,img:o,children:s.jsxs("div",{className:"flex gap-1 items-center",children:[s.jsxs(d,{variant:"muted",children:[s.jsx(q,{})," ",x(k)]}),s.jsxs(d,{variant:"muted",children:[s.jsx(Q,{})," ",x(y)]}),s.jsxs(d,{variant:"muted",children:[s.jsx(T,{})," ",x(S)]})]})})},w)),i&&Array(3).fill(0).map((r,o)=>s.jsx(b,{className:"basis-75 ml-2 px-1 py-1 bg-card flex rounded-xl border shadow-sm",children:s.jsx(_,{})},o))]}),s.jsx(H,{className:"absolute top-1/2 group-hover:-left-4 left-0 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 disabled:opacity-0"}),s.jsx(D,{className:"absolute top-1/2 group-hover:-right-4 right-0 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 disabled:opacity-0"})]})]})},Rs=l=>{const{className:t,mangaId:e}=l,{manga:a}=F(e),{categories:c}=I(a.genres,a.tags),{basicInfo:i}=O(a);return s.jsxs(z,{className:t,rateStatistic:s.jsx(K,{mangaId:e}),bookmarkStatistic:s.jsx(V,{mangaId:e}),children:[n.isMobile&&s.jsx(L,{basicInfo:i}),s.jsx(R,{text:a.description,className:"px-5"}),s.jsx(X,{mangaId:e,className:m(n.isMobile?"w-[100vw] max-w-300":"w-[calc(100vw-306px)]  max-w-[925px]"),heading:s.jsx(h,{className:"ml-3 mb-2",variant:"h3",color:"primary",children:"Связаное"})}),s.jsx(A,{categories:c,className:"px-5"})]})};export{Rs as AboutManga};
