var ut=Object.defineProperty;var dt=(t,a,e)=>a in t?ut(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;var i=(t,a,e)=>dt(t,typeof a!="symbol"?a+"":a,e);import{r as u,j as o,c as I,k as ht,s as mt,v as ft,h as pt,w as Ne,a as De}from"./index-BBOIb04p.js";import{c as V,S as L,B as $,b as yt,f as xt,P as oe,u as bt,g as Fe,e as ye}from"./button-CBBu9zPz.js";import{B as wt,M as gt,a as kt,b as Tt,c as Ct,d as vt,D as Me,e as re,f as Nt,g as Dt,h as Ft,i as Mt}from"./dropdown-menu-DRJNkDcN.js";import{H as Y}from"./heading-B3JxPwrU.js";import{I as z}from"./input-COoXHJLR.js";import{L as Rt}from"./index-E9rGp8-C.js";import{u as jt}from"./index-Bg1MQUgi.js";import{S as xe}from"./separator-9rsH-1Uw.js";import{M as Pt}from"./move-left-BitLtMKb.js";import{u as Re}from"./useDebounce-eOa9egCm.js";import{g as _t,s as je,a as It,b as Ot,l as be,i as Et,w as we,c as St,d as Pe,f as Bt,p as ge}from"./parseISO-D8VFmm5E.js";import{t as j,c as O,g as _e,d as qt,f as Ht,h as Gt,s as se,a as Ie,e as Yt}from"./en-US-COFYzLpy.js";import{o as y,s as A,e as Oe,n as Ee,a as ce,c as Se}from"./types-BAOhVOD-.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h4",key:"6d7r33"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h10",key:"1438ji"}]],Lt=V("arrow-down-narrow-wide",At);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]],Qt=V("arrow-down-wide-narrow",$t);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Be=V("check",Vt);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ut=V("minus",Wt);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],ke=V("move-right",zt),Xt="_fadeIn_ane8n_25",Kt="_fadeOut_ane8n_29",te={fadeIn:Xt,fadeOut:Kt},Na=t=>{const{className:a,common:e,genres:s,tags:r}=t,[n,c]=u.useState(!1),[l,d]=u.useState(!1),h=u.useCallback(()=>{d(!0)},[]),p=u.useCallback(()=>{c(!0)},[]),x=u.useCallback(()=>{d(!1)},[]),C=u.useCallback(()=>{c(!1)},[]);return o.jsx("div",{className:I("relative bg-card h-full overflow-hidden",a),children:o.jsxs(u.Suspense,{fallback:o.jsx(ht,{variant:"flower",className:"mx-auto"}),children:[!n&&!l&&o.jsx(L,{className:te.fadeOut,children:e(h,p)}),l&&o.jsx(L,{className:te.fadeIn,children:s(x)}),n&&o.jsx(L,{className:te.fadeIn,children:r(C)})]})})},qe={search:""},Zt=t=>a=>({...qe,setSearch:e=>a(()=>({search:e}),!1,`${t}/setSearch`)}),He={ageRateFrom:NaN,ageRateTo:NaN},Jt=t=>a=>({...He,setAgeRateFrom:e=>a(()=>({ageRateFrom:e}),!1,`${t}/setAgeRateFrom`),setAgeRateTo:e=>a(()=>({ageRateTo:e}),!1,`${t}/setAgeRateTo`)}),Ge={bookmarks:[]},er=t=>a=>({...Ge,setBookmarks:e=>a(()=>({bookmarks:e}),!1,`${t}/setBookmarks`)}),Ye={chapterCountFrom:NaN,chapterCountTo:NaN},tr=t=>a=>({...Ye,setChapterCountFrom:e=>a(()=>({chapterCountFrom:e}),!1,`${t}/setChapterCountFrom`),setChapterCountTo:e=>a(()=>({chapterCountTo:e}),!1,`${t}/setChapterCountTo`)}),ae={genres:[],notGenres:[]},rr=t=>a=>({...ae,setGenres:e=>a(()=>({genres:e}),!1,`${t}/setGenres`),setNotGenres:e=>a(()=>({notGenres:e}),!1,`${t}/setNotGenres`),resetGenres:()=>a(()=>ae,!1,`${t}/resetGenres`)}),Ae={type:[]},sr=t=>a=>({...Ae,setType:e=>a(()=>({type:e}),!1,`${t}/setType`)}),Le={order:"desc"},ar=t=>a=>({...Le,setOrder:e=>a(()=>({order:e}),!1,`${t}/setOrder`)}),$e={rateFrom:NaN,rateTo:NaN},nr=t=>a=>({...$e,setRateFrom:e=>a(()=>({rateFrom:e}),!1,`${t}/setRateFrom`),setRateTo:e=>a(()=>({rateTo:e}),!1,`${t}/setRateTo`)}),Qe={rateCountFrom:NaN,rateCountTo:NaN},or=t=>a=>({...Qe,setRateCountFrom:e=>a(()=>({rateCountFrom:e}),!1,`${t}/setRateCountFrom`),setRateCountTo:e=>a(()=>({rateCountTo:e}),!1,`${t}/setRateCountTo`)}),Ve={releaseDateFrom:"",releaseDateTo:""},cr=t=>a=>({...Ve,setReleaseDateFrom:e=>a(()=>({releaseDateFrom:e}),!1,`${t}/setReleaseDateFrom`),setReleaseDateTo:e=>a(()=>({releaseDateTo:e}),!1,`${t}/setReleaseDateTo`)}),ne={tags:[],notTags:[]},ir=t=>a=>({...ne,setTags:e=>a(()=>({tags:e}),!1,`${t}/setTags`),setNotTags:e=>a(()=>({notTags:e}),!1,`${t}/setNotTags`),resetTags:()=>a(()=>ne,!1,`${t}/resetTags`)}),We={status:[]},lr=t=>a=>({...We,setStatus:e=>a(()=>({status:e}),!1,`${t}/setStatus`)}),Ue={sortBy:"rating"},ur=t=>a=>({...Ue,setSortBy:e=>a(()=>({sortBy:e}),!1,`${t}/setSortBy`)}),Te={...ae,...ne,...We,...Ae,...He,...Ge,...Ye,...Qe,...$e,...Ve,...qe,...Ue,...Le,appliedFilters:{}},dr=t=>(a,e)=>({resetAll:()=>a(()=>Te,!1,`${t}/resetAll`),getFilters:()=>e(),setInitialState:s=>a(()=>({...Te,...s}),!1,`${t}/setInitialState`),appliedFilters:{},setAppliedFilters:s=>a(()=>({appliedFilters:s}),!1,`${t}/setAppliedFilters`)}),hr=t=>{const a=t;a.use={};for(const e of Object.keys(a.getState()))a.use[e]=()=>a(s=>s[e]);return a},M="MangaCatalogFilters",mr=mt()(ft((...t)=>({...Zt(M)(...t),...ur(M)(...t),...ar(M)(...t),...rr(M)(...t),...ir(M)(...t),...sr(M)(...t),...lr(M)(...t),...er(M)(...t),...tr(M)(...t),...or(M)(...t),...nr(M)(...t),...Jt(M)(...t),...cr(M)(...t),...dr(M)(...t)}),{name:M})),Q=hr(mr),fr=y({search:A().optional()}),pr=y({search:A().optional()}),yr=y({order:Oe(["asc","desc"]).optional()}),xr=y({order:Oe(["asc","desc"]).optional()}),ie={rating:"rating",updateDate:"updateDate",createDate:"createDate",ruAlphabetically:"ruAlphabetically",enAlphabetically:"enAlphabetically",views:"views",likes:"likes",chapterCount:"chapterCount"},br=y({sortBy:Ee(ie).optional()}),wr=y({sortBy:Ee(ie).optional()});function ze(t,a,e){const s=j(t,e==null?void 0:e.in);return isNaN(a)?O((e==null?void 0:e.in)||t,NaN):(a&&s.setDate(s.getDate()+a),s)}function gr(){return Object.assign({},_e())}function kr(t,a){const e=j(t,a==null?void 0:a.in).getDay();return e===0?7:e}function Tr(t,a){return+j(t)<+j(a)}function Cr(t,a){const e=vr(a)?new a(0):O(a,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e}function vr(t){var a;return typeof t=="function"&&((a=t.prototype)==null?void 0:a.constructor)===t}const Nr=10;class Xe{constructor(){i(this,"subPriority",0)}validate(a,e){return!0}}class Dr extends Xe{constructor(a,e,s,r,n){super(),this.value=a,this.validateValue=e,this.setValue=s,this.priority=r,n&&(this.subPriority=n)}validate(a,e){return this.validateValue(a,this.value,e)}set(a,e,s){return this.setValue(a,e,this.value,s)}}class Fr extends Xe{constructor(e,s){super();i(this,"priority",Nr);i(this,"subPriority",-1);this.context=e||(r=>O(s,r))}set(e,s){return s.timestampIsSet?e:O(e,Cr(e,this.context))}}class f{run(a,e,s,r){const n=this.parse(a,e,s,r);return n?{setter:new Dr(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}validate(a,e,s){return!0}}class Mr extends f{constructor(){super(...arguments);i(this,"priority",140);i(this,"incompatibleTokens",["R","u","t","T"])}parse(e,s,r){switch(s){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,s,r){return s.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}const k={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},P={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function T(t,a){return t&&{value:a(t.value),rest:t.rest}}function w(t,a){const e=a.match(t);return e?{value:parseInt(e[0],10),rest:a.slice(e[0].length)}:null}function _(t,a){const e=a.match(t);if(!e)return null;if(e[0]==="Z")return{value:0,rest:a.slice(1)};const s=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,n=e[3]?parseInt(e[3],10):0,c=e[5]?parseInt(e[5],10):0;return{value:s*(r*qt+n*Ht+c*Gt),rest:a.slice(e[0].length)}}function Ke(t){return w(k.anyDigitsSigned,t)}function g(t,a){switch(t){case 1:return w(k.singleDigit,a);case 2:return w(k.twoDigits,a);case 3:return w(k.threeDigits,a);case 4:return w(k.fourDigits,a);default:return w(new RegExp("^\\d{1,"+t+"}"),a)}}function X(t,a){switch(t){case 1:return w(k.singleDigitSigned,a);case 2:return w(k.twoDigitsSigned,a);case 3:return w(k.threeDigitsSigned,a);case 4:return w(k.fourDigitsSigned,a);default:return w(new RegExp("^-?\\d{1,"+t+"}"),a)}}function le(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Ze(t,a){const e=a>0,s=e?a:1-a;let r;if(s<=50)r=t||100;else{const n=s+50,c=Math.trunc(n/100)*100,l=t>=n%100;r=t+c-(l?100:0)}return e?r:1-r}function Je(t){return t%400===0||t%4===0&&t%100!==0}class Rr extends f{constructor(){super(...arguments);i(this,"priority",130);i(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,s,r){const n=c=>({year:c,isTwoDigitYear:s==="yy"});switch(s){case"y":return T(g(4,e),n);case"yo":return T(r.ordinalNumber(e,{unit:"year"}),n);default:return T(g(s.length,e),n)}}validate(e,s){return s.isTwoDigitYear||s.year>0}set(e,s,r){const n=e.getFullYear();if(r.isTwoDigitYear){const l=Ze(r.year,n);return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}const c=!("era"in s)||s.era===1?r.year:1-r.year;return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}}class jr extends f{constructor(){super(...arguments);i(this,"priority",130);i(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,s,r){const n=c=>({year:c,isTwoDigitYear:s==="YY"});switch(s){case"Y":return T(g(4,e),n);case"Yo":return T(r.ordinalNumber(e,{unit:"year"}),n);default:return T(g(s.length,e),n)}}validate(e,s){return s.isTwoDigitYear||s.year>0}set(e,s,r,n){const c=_t(e,n);if(r.isTwoDigitYear){const d=Ze(r.year,c);return e.setFullYear(d,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),se(e,n)}const l=!("era"in s)||s.era===1?r.year:1-r.year;return e.setFullYear(l,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),se(e,n)}}class Pr extends f{constructor(){super(...arguments);i(this,"priority",130);i(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,s){return X(s==="R"?4:s.length,e)}set(e,s,r){const n=O(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),je(n)}}class _r extends f{constructor(){super(...arguments);i(this,"priority",130);i(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,s){return X(s==="u"?4:s.length,e)}set(e,s,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}class Ir extends f{constructor(){super(...arguments);i(this,"priority",120);i(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,s,r){switch(s){case"Q":case"QQ":return g(s.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,s){return s>=1&&s<=4}set(e,s,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class Or extends f{constructor(){super(...arguments);i(this,"priority",120);i(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,s,r){switch(s){case"q":case"qq":return g(s.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,s){return s>=1&&s<=4}set(e,s,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class Er extends f{constructor(){super(...arguments);i(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);i(this,"priority",110)}parse(e,s,r){const n=c=>c-1;switch(s){case"M":return T(w(k.month,e),n);case"MM":return T(g(2,e),n);case"Mo":return T(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,s){return s>=0&&s<=11}set(e,s,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Sr extends f{constructor(){super(...arguments);i(this,"priority",110);i(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,s,r){const n=c=>c-1;switch(s){case"L":return T(w(k.month,e),n);case"LL":return T(g(2,e),n);case"Lo":return T(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,s){return s>=0&&s<=11}set(e,s,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}function Br(t,a,e){const s=j(t,e==null?void 0:e.in),r=It(s,e)-a;return s.setDate(s.getDate()-r*7),j(s,e==null?void 0:e.in)}class qr extends f{constructor(){super(...arguments);i(this,"priority",100);i(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,s,r){switch(s){case"w":return w(k.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return g(s.length,e)}}validate(e,s){return s>=1&&s<=53}set(e,s,r,n){return se(Br(e,r,n),n)}}function Hr(t,a,e){const s=j(t,e==null?void 0:e.in),r=Ot(s,e)-a;return s.setDate(s.getDate()-r*7),s}class Gr extends f{constructor(){super(...arguments);i(this,"priority",100);i(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,s,r){switch(s){case"I":return w(k.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return g(s.length,e)}}validate(e,s){return s>=1&&s<=53}set(e,s,r){return je(Hr(e,r))}}const Yr=[31,28,31,30,31,30,31,31,30,31,30,31],Ar=[31,29,31,30,31,30,31,31,30,31,30,31];class Lr extends f{constructor(){super(...arguments);i(this,"priority",90);i(this,"subPriority",1);i(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,s,r){switch(s){case"d":return w(k.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return g(s.length,e)}}validate(e,s){const r=e.getFullYear(),n=Je(r),c=e.getMonth();return n?s>=1&&s<=Ar[c]:s>=1&&s<=Yr[c]}set(e,s,r){return e.setDate(r),e.setHours(0,0,0,0),e}}class $r extends f{constructor(){super(...arguments);i(this,"priority",90);i(this,"subpriority",1);i(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,s,r){switch(s){case"D":case"DD":return w(k.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return g(s.length,e)}}validate(e,s){const r=e.getFullYear();return Je(r)?s>=1&&s<=366:s>=1&&s<=365}set(e,s,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}}function ue(t,a,e){var x,C,v,N;const s=_e(),r=(e==null?void 0:e.weekStartsOn)??((C=(x=e==null?void 0:e.locale)==null?void 0:x.options)==null?void 0:C.weekStartsOn)??s.weekStartsOn??((N=(v=s.locale)==null?void 0:v.options)==null?void 0:N.weekStartsOn)??0,n=j(t,e==null?void 0:e.in),c=n.getDay(),d=(a%7+7)%7,h=7-r,p=a<0||a>6?a-(c+h)%7:(d+h)%7-(c+h)%7;return ze(n,p,e)}class Qr extends f{constructor(){super(...arguments);i(this,"priority",90);i(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,s,r){switch(s){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,s){return s>=0&&s<=6}set(e,s,r,n){return e=ue(e,r,n),e.setHours(0,0,0,0),e}}class Vr extends f{constructor(){super(...arguments);i(this,"priority",90);i(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,s,r,n){const c=l=>{const d=Math.floor((l-1)/7)*7;return(l+n.weekStartsOn+6)%7+d};switch(s){case"e":case"ee":return T(g(s.length,e),c);case"eo":return T(r.ordinalNumber(e,{unit:"day"}),c);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,s){return s>=0&&s<=6}set(e,s,r,n){return e=ue(e,r,n),e.setHours(0,0,0,0),e}}class Wr extends f{constructor(){super(...arguments);i(this,"priority",90);i(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,s,r,n){const c=l=>{const d=Math.floor((l-1)/7)*7;return(l+n.weekStartsOn+6)%7+d};switch(s){case"c":case"cc":return T(g(s.length,e),c);case"co":return T(r.ordinalNumber(e,{unit:"day"}),c);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,s){return s>=0&&s<=6}set(e,s,r,n){return e=ue(e,r,n),e.setHours(0,0,0,0),e}}function Ur(t,a,e){const s=j(t,e==null?void 0:e.in),r=kr(s,e),n=a-r;return ze(s,n,e)}class zr extends f{constructor(){super(...arguments);i(this,"priority",90);i(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,s,r){const n=c=>c===0?7:c;switch(s){case"i":case"ii":return g(s.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return T(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return T(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return T(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiii":default:return T(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,s){return s>=1&&s<=7}set(e,s,r){return e=Ur(e,r),e.setHours(0,0,0,0),e}}class Xr extends f{constructor(){super(...arguments);i(this,"priority",80);i(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,s,r){switch(s){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,s,r){return e.setHours(le(r),0,0,0),e}}class Kr extends f{constructor(){super(...arguments);i(this,"priority",80);i(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,s,r){switch(s){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,s,r){return e.setHours(le(r),0,0,0),e}}class Zr extends f{constructor(){super(...arguments);i(this,"priority",80);i(this,"incompatibleTokens",["a","b","t","T"])}parse(e,s,r){switch(s){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,s,r){return e.setHours(le(r),0,0,0),e}}class Jr extends f{constructor(){super(...arguments);i(this,"priority",70);i(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,s,r){switch(s){case"h":return w(k.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return g(s.length,e)}}validate(e,s){return s>=1&&s<=12}set(e,s,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):!n&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}}class es extends f{constructor(){super(...arguments);i(this,"priority",70);i(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,s,r){switch(s){case"H":return w(k.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return g(s.length,e)}}validate(e,s){return s>=0&&s<=23}set(e,s,r){return e.setHours(r,0,0,0),e}}class ts extends f{constructor(){super(...arguments);i(this,"priority",70);i(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,s,r){switch(s){case"K":return w(k.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return g(s.length,e)}}validate(e,s){return s>=0&&s<=11}set(e,s,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}}class rs extends f{constructor(){super(...arguments);i(this,"priority",70);i(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,s,r){switch(s){case"k":return w(k.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return g(s.length,e)}}validate(e,s){return s>=1&&s<=24}set(e,s,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}}class ss extends f{constructor(){super(...arguments);i(this,"priority",60);i(this,"incompatibleTokens",["t","T"])}parse(e,s,r){switch(s){case"m":return w(k.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return g(s.length,e)}}validate(e,s){return s>=0&&s<=59}set(e,s,r){return e.setMinutes(r,0,0),e}}class as extends f{constructor(){super(...arguments);i(this,"priority",50);i(this,"incompatibleTokens",["t","T"])}parse(e,s,r){switch(s){case"s":return w(k.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return g(s.length,e)}}validate(e,s){return s>=0&&s<=59}set(e,s,r){return e.setSeconds(r,0),e}}class ns extends f{constructor(){super(...arguments);i(this,"priority",30);i(this,"incompatibleTokens",["t","T"])}parse(e,s){const r=n=>Math.trunc(n*Math.pow(10,-s.length+3));return T(g(s.length,e),r)}set(e,s,r){return e.setMilliseconds(r),e}}class os extends f{constructor(){super(...arguments);i(this,"priority",10);i(this,"incompatibleTokens",["t","T","x"])}parse(e,s){switch(s){case"X":return _(P.basicOptionalMinutes,e);case"XX":return _(P.basic,e);case"XXXX":return _(P.basicOptionalSeconds,e);case"XXXXX":return _(P.extendedOptionalSeconds,e);case"XXX":default:return _(P.extended,e)}}set(e,s,r){return s.timestampIsSet?e:O(e,e.getTime()-Ie(e)-r)}}class cs extends f{constructor(){super(...arguments);i(this,"priority",10);i(this,"incompatibleTokens",["t","T","X"])}parse(e,s){switch(s){case"x":return _(P.basicOptionalMinutes,e);case"xx":return _(P.basic,e);case"xxxx":return _(P.basicOptionalSeconds,e);case"xxxxx":return _(P.extendedOptionalSeconds,e);case"xxx":default:return _(P.extended,e)}}set(e,s,r){return s.timestampIsSet?e:O(e,e.getTime()-Ie(e)-r)}}class is extends f{constructor(){super(...arguments);i(this,"priority",40);i(this,"incompatibleTokens","*")}parse(e){return Ke(e)}set(e,s,r){return[O(e,r*1e3),{timestampIsSet:!0}]}}class ls extends f{constructor(){super(...arguments);i(this,"priority",20);i(this,"incompatibleTokens","*")}parse(e){return Ke(e)}set(e,s,r){return[O(e,r),{timestampIsSet:!0}]}}const us={G:new Mr,y:new Rr,Y:new jr,R:new Pr,u:new _r,Q:new Ir,q:new Or,M:new Er,L:new Sr,w:new qr,I:new Gr,d:new Lr,D:new $r,E:new Qr,e:new Vr,c:new Wr,i:new zr,a:new Xr,b:new Kr,B:new Zr,h:new Jr,H:new es,K:new ts,k:new rs,m:new ss,s:new as,S:new ns,X:new os,x:new cs,t:new is,T:new ls},ds=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hs=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ms=/^'([^]*?)'?$/,fs=/''/g,ps=/\S/,ys=/[a-zA-Z]/;function xs(t,a,e,s){var S,D,F,G;const r=()=>O(e,NaN),n=gr(),c=n.locale??Yt,l=n.firstWeekContainsDate??((D=(S=n.locale)==null?void 0:S.options)==null?void 0:D.firstWeekContainsDate)??1,d=n.weekStartsOn??((G=(F=n.locale)==null?void 0:F.options)==null?void 0:G.weekStartsOn)??0;if(!a)return t?r():j(e,s==null?void 0:s.in);const h={firstWeekContainsDate:l,weekStartsOn:d,locale:c},p=[new Fr(s==null?void 0:s.in,e)],x=a.match(hs).map(m=>{const b=m[0];if(b in be){const R=be[b];return R(m,c.formatLong)}return m}).join("").match(ds),C=[];for(let m of x){Et(m)&&we(m,a,t),St(m)&&we(m,a,t);const b=m[0],R=us[b];if(R){const{incompatibleTokens:W}=R;if(Array.isArray(W)){const fe=C.find(pe=>W.includes(pe.token)||pe.token===b);if(fe)throw new RangeError(`The format string mustn't contain \`${fe.fullToken}\` and \`${m}\` at the same time`)}else if(R.incompatibleTokens==="*"&&C.length>0)throw new RangeError(`The format string mustn't contain \`${m}\` and any other token at the same time`);C.push({token:b,fullToken:m});const ee=R.run(t,m,c.match,h);if(!ee)return r();p.push(ee.setter),t=ee.rest}else{if(b.match(ys))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");if(m==="''"?m="'":b==="'"&&(m=bs(m)),t.indexOf(m)===0)t=t.slice(m.length);else return r()}}if(t.length>0&&ps.test(t))return r();const v=p.map(m=>m.priority).sort((m,b)=>b-m).filter((m,b,R)=>R.indexOf(m)===b).map(m=>p.filter(b=>b.priority===m).sort((b,R)=>R.subPriority-b.subPriority)).map(m=>m[0]);let N=j(e,s==null?void 0:s.in);if(isNaN(+N))return r();const E={};for(const m of v){if(!m.validate(N,h))return r();const b=m.set(N,E,h);Array.isArray(b)?(N=b[0],Object.assign(E,b[1])):N=b}return N}function bs(t){return t.match(ms)[1].replace(fs,"'")}function ws(t){const a=["yyyy","MM.yyyy","dd.MM.yyyy"];for(const e of a){const s=xs(t,e,new Date);if(Pe(s))return s.toISOString()}}const q=ce().optional().catch(void 0),K=ce().array().transform(t=>t.join(",")).optional().catch(""),de=A().array().transform(t=>t.join(",")).optional().catch(""),Ce=A().transform(ws).optional().catch(void 0),H=Se.number().optional().catch(NaN),Z=A().transform(t=>t.split(",").map(a=>parseInt(a))).pipe(ce().int().array()).optional().catch([]),he=t=>A().transform(a=>a.split(",")).pipe(t.array()).optional().catch([]),ve=Se.date().transform(t=>Pe(t)?Bt(t,"dd.mm.yyyy"):"").optional().catch(""),gs=y({ageRateFrom:q,ageRateTo:q}),ks=y({ageRateFrom:H,ageRateTo:H}),Ts=y({chapterCountFrom:q,chapterCountTo:q}),Cs=y({chapterCountFrom:H,chapterCountTo:H}),vs=y({rateFrom:q,rateTo:q}),Ns=y({rateFrom:H,rateTo:H}),Ds=y({rateCountFrom:q,rateCountTo:q}),Fs=y({rateCountFrom:H,rateCountTo:H}),Ms=y({releaseDateFrom:Ce,releaseDateTo:Ce}),Rs=y({releaseDateFrom:ve,releaseDateTo:ve}),js=y({genres:K,notGenres:K}),Ps=y({genres:Z,notGenres:Z}),_s=y({tags:K,notTags:K}),Is=y({tags:Z,notTags:Z}),Os=y({status:de}),Es=y({status:he(wt)}),Ss=y({type:de}),Bs=y({type:he(gt)}),qs=y({bookmarks:de}),Hs=y({bookmarks:he(kt)});function Gs(t){return Object.fromEntries(Object.entries(t).filter(([a,e])=>!!e))}function U(t,a){return Number.isFinite(a)?Math.min(t,a):t}function Ys(t){const a={...t};return t.ageRateFrom&&t.ageRateTo&&(a.ageRateFrom=U(t.ageRateFrom,t.ageRateTo)),t.chapterCountFrom&&t.chapterCountTo&&(a.chapterCountFrom=U(t.chapterCountFrom,t.chapterCountTo)),t.rateCountFrom&&t.rateCountTo&&(a.rateCountFrom=U(t.rateCountFrom,t.rateCountTo)),t.rateFrom&&t.rateTo&&(a.rateFrom=U(t.rateFrom,t.rateTo)),t.releaseDateFrom&&t.releaseDateTo&&(Tr(ge(t.releaseDateFrom),ge(t.releaseDateTo))||(a.releaseDateFrom=t.releaseDateTo)),a}function et(){const[t,a]=pt();return{setSearchParam:(c,l)=>{t.set(c,l),a(t)},setSearchParams:a,getSearchParam:c=>t.get(c),getAllSearchParams:()=>Object.fromEntries(t.entries()),deleteSearchParam:c=>{t.delete(c)}}}const As=fr.and(yr).and(br).and(gs).and(Ts).and(vs).and(Ds).and(Ms).and(js).and(_s).and(Os).and(Ss).and(qs);function tt(t,a=!0){const{setSearchParams:e}=et(),s=Q.use.getFilters(),r=Q.use.setAppliedFilters();return{applyFilters:u.useCallback(()=>{const c=Ys(Gs(As.parse(s())));r(c),a&&e(Object.fromEntries(Object.entries(c).map(([l,d])=>[l,String(d)]))),t==null||t()},[t,s,a,r,e])}}function Da(t){const a=t.ageRateFrom(),e=t.setAgeRateFrom(),s=t.ageRateTo(),r=t.setAgeRateTo();return{from:a,to:s,setFrom:e,setTo:r}}function Fa(t){const a=t.bookmarks(),e=t.setBookmarks(),s=u.useMemo(()=>Object.values(Tt).map(r=>({value:r,label:r})),[]);return{values:a,onValuesChange:e,checkboxes:s}}function Ma(t){const a=t.chapterCountFrom(),e=t.setChapterCountFrom(),s=t.chapterCountTo(),r=t.setChapterCountTo();return{from:a,to:s,setFrom:e,setTo:r}}function Ra(t){const a=t.type(),e=t.setType(),s=u.useMemo(()=>Object.values(Ct).map(r=>({value:r,label:r})),[]);return{values:a,onValuesChange:e,checkboxes:s}}function ja(t){const a=t.rateFrom(),e=t.setRateFrom(),s=t.rateTo(),r=t.setRateTo();return{from:a,to:s,setFrom:e,setTo:r}}function Pa(t){const a=t.rateCountFrom(),e=t.setRateCountFrom(),s=t.rateCountTo(),r=t.setRateCountTo();return{from:a,to:s,setFrom:e,setTo:r}}function _a(t){const a=t.releaseDateFrom(),e=t.setReleaseDateFrom(),s=t.releaseDateTo(),r=t.setReleaseDateTo();return{from:a,to:s,setFrom:e,setTo:r}}function Ia(t){const a=t.status(),e=t.setStatus(),s=u.useMemo(()=>Object.values(vt).map(r=>({value:r,label:r})),[]);return{values:a,onValuesChange:e,checkboxes:s}}const Oa=t=>{const{className:a,header:e,body:s,footer:r}=t;return o.jsxs("div",{className:I("flex flex-col h-full ",a),children:[e,o.jsx("div",{className:"overflow-auto px-4 grow flex flex-col gap-4",children:s}),o.jsx(L,{className:"mx-4 mb-4",children:r})]})},Ls=u.memo(t=>{const{className:a,toGenres:e,toTags:s}=t;return o.jsxs("div",{className:I("px-2 py-2",a),children:[o.jsxs("div",{role:"button",onClick:e,className:I("flex items-center justify-between gap-2 cursor-pointer hover:bg-accent transition-colors p-2 ",a),children:[o.jsx(Y,{color:"primary",children:"Жанры"}),o.jsx(ke,{className:"stroke-primary"})]}),o.jsxs("div",{role:"button",onClick:s,className:I("flex items-center justify-between gap-2 cursor-pointer hover:bg-accent transition-colors p-2 ",a),children:[o.jsx(Y,{color:"primary",children:"Теги"}),o.jsx(ke,{className:"stroke-primary"})]})]})});Ls.displayName="CommonHeader";const $s=u.memo(t=>{const{className:a,label:e,from:s,to:r,setFrom:n,setTo:c}=t;return o.jsxs("div",{className:a,children:[o.jsx(Y,{color:"primary",children:e}),o.jsxs("div",{className:"flex gap-1 items-center",children:[o.jsx(z,{className:"p-0 px-1",value:s,onChangeValue:n,placeholder:"дд.мм.гггг / гггг"}),o.jsx("span",{className:"h-[1px] w-3 grow-0 bg-primary"}),o.jsx(z,{className:"p-0 px-1",value:r,onChangeValue:c,placeholder:"дд.мм.гггг / гггг"})]})]})});$s.displayName="DateRange";const Ea=t=>{const{onApply:a,onReset:e,className:s}=t;return o.jsxs("div",{className:I("flex gap-2 items-center justify-around",s),children:[o.jsx($,{slot:"close",onClick:a,className:"basis-[45%]",children:"Применить"}),o.jsx($,{variant:"secondary",onClick:e,className:"basis-[45%]",children:"Сбросить"})]})},Qs=u.memo(t=>{const{className:a,label:e,from:s,to:r,setFrom:n,setTo:c,max:l}=t,d=u.useCallback(p=>{n(Math.floor(Number(p)))},[n]),h=u.useCallback(p=>{c(Math.floor(Number(p)))},[c]);return o.jsxs("div",{className:a,children:[o.jsx(Y,{color:"primary",children:e}),o.jsxs("div",{className:"flex gap-1 items-center",children:[o.jsx(z,{className:"p-0 px-1",value:String(s).replace("NaN",""),onChangeValue:d,placeholder:"From",type:"number",min:0,max:l}),o.jsx("span",{className:"h-[1px] w-3 grow-0 bg-primary"}),o.jsx(z,{className:"p-0 px-1",value:String(r).replace("NaN",""),onChangeValue:h,placeholder:"To",type:"number",min:0,max:l})]})]})});Qs.displayName="Range";function Vs(t){const a=u.useRef({value:t,previous:t});return u.useMemo(()=>(a.current.value!==t&&(a.current.previous=a.current.value,a.current.value=t),a.current.previous),[t])}var J="Checkbox",[Ws,Sa]=yt(J),[Us,me]=Ws(J);function zs(t){const{__scopeCheckbox:a,checked:e,children:s,defaultChecked:r,disabled:n,form:c,name:l,onCheckedChange:d,required:h,value:p="on",internal_do_not_use_render:x}=t,[C,v]=bt({prop:e,defaultProp:r??!1,onChange:d,caller:J}),[N,E]=u.useState(null),[S,D]=u.useState(null),F=u.useRef(!1),G=N?!!c||!!N.closest("form"):!0,m={checked:C,disabled:n,setChecked:v,control:N,setControl:E,name:l,form:c,value:p,hasConsumerStoppedPropagationRef:F,required:h,defaultChecked:B(r)?!1:r,isFormControl:G,bubbleInput:S,setBubbleInput:D};return o.jsx(Us,{scope:a,...m,children:Xs(x)?x(m):s})}var rt="CheckboxTrigger",st=u.forwardRef(({__scopeCheckbox:t,onKeyDown:a,onClick:e,...s},r)=>{const{control:n,value:c,disabled:l,checked:d,required:h,setControl:p,setChecked:x,hasConsumerStoppedPropagationRef:C,isFormControl:v,bubbleInput:N}=me(rt,t),E=Fe(r,p),S=u.useRef(d);return u.useEffect(()=>{const D=n==null?void 0:n.form;if(D){const F=()=>x(S.current);return D.addEventListener("reset",F),()=>D.removeEventListener("reset",F)}},[n,x]),o.jsx(oe.button,{type:"button",role:"checkbox","aria-checked":B(d)?"mixed":d,"aria-required":h,"data-state":lt(d),"data-disabled":l?"":void 0,disabled:l,value:c,...s,ref:E,onKeyDown:ye(a,D=>{D.key==="Enter"&&D.preventDefault()}),onClick:ye(e,D=>{x(F=>B(F)?!0:!F),N&&v&&(C.current=D.isPropagationStopped(),C.current||D.stopPropagation())})})});st.displayName=rt;var at=u.forwardRef((t,a)=>{const{__scopeCheckbox:e,name:s,checked:r,defaultChecked:n,required:c,disabled:l,value:d,onCheckedChange:h,form:p,...x}=t;return o.jsx(zs,{__scopeCheckbox:e,checked:r,defaultChecked:n,disabled:l,required:c,onCheckedChange:h,name:s,form:p,value:d,internal_do_not_use_render:({isFormControl:C})=>o.jsxs(o.Fragment,{children:[o.jsx(st,{...x,ref:a,__scopeCheckbox:e}),C&&o.jsx(it,{__scopeCheckbox:e})]})})});at.displayName=J;var nt="CheckboxIndicator",ot=u.forwardRef((t,a)=>{const{__scopeCheckbox:e,forceMount:s,...r}=t,n=me(nt,e);return o.jsx(xt,{present:s||B(n.checked)||n.checked===!0,children:o.jsx(oe.span,{"data-state":lt(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:a,style:{pointerEvents:"none",...t.style}})})});ot.displayName=nt;var ct="CheckboxBubbleInput",it=u.forwardRef(({__scopeCheckbox:t,...a},e)=>{const{control:s,hasConsumerStoppedPropagationRef:r,checked:n,defaultChecked:c,required:l,disabled:d,name:h,value:p,form:x,bubbleInput:C,setBubbleInput:v}=me(ct,t),N=Fe(e,v),E=Vs(n),S=jt(s);u.useEffect(()=>{const F=C;if(!F)return;const G=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(G,"checked").set,R=!r.current;if(E!==n&&b){const W=new Event("click",{bubbles:R});F.indeterminate=B(n),b.call(F,B(n)?!1:n),F.dispatchEvent(W)}},[C,E,n,r]);const D=u.useRef(B(n)?!1:n);return o.jsx(oe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??D.current,required:l,disabled:d,name:h,value:p,form:x,...a,tabIndex:-1,ref:N,style:{...a.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});it.displayName=ct;function Xs(t){return typeof t=="function"}function B(t){return t==="indeterminate"}function lt(t){return B(t)?"indeterminate":t?"checked":"unchecked"}function Ks({className:t,...a}){return o.jsx(at,{"data-slot":"checkbox",className:I("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:o.jsx(ot,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:o.jsx(Be,{className:"size-3.5"})})})}const Zs=t=>{const{className:a,values:e,onValuesChange:s,label:r,checkboxes:n}=t,c=u.useCallback((l,d)=>{s(l?e.concat(d):e.filter(h=>h!==d))},[s,e]);return o.jsxs("div",{className:a,children:[o.jsx(Y,{color:"primary",children:r}),o.jsx("div",{className:"flex flex-wrap gap-3 items-center",children:n.map(l=>o.jsxs("div",{className:"flex gap-1 items-center",children:[o.jsx(Ks,{checked:e.includes(l.value),onCheckedChange:d=>c(d,l.value)}),o.jsx(Rt,{children:l.label})]},l.value))})]})},Ba=u.memo(Zs),Js=u.memo(t=>{const{className:a,title:e,onBack:s,onReset:r,input:n}=t;return o.jsxs("div",{className:"px-4 pt-4",children:[o.jsxs("div",{className:I("flex items-center justify-between gap-2 mb-2",a),children:[o.jsxs($,{onClick:s,className:"flex items-center gap-1",variant:"clear",size:"clear",children:[o.jsx(Pt,{className:"stroke-primary"}),o.jsx(Y,{color:"primary",asChild:!0,children:o.jsx("span",{children:e})})]}),o.jsx($,{onClick:r,variant:"clear",size:"clear",className:"hover:opacity-80 transition-opacity",children:"Сбросить"})]}),o.jsx(xe,{}),o.jsx(L,{className:"my-2",children:n}),o.jsx(xe,{className:"mb-2"})]})});Js.displayName="CategoryHeader";const ea=t=>t==="indeterminate"?"include":t==="include"?"exclude":"indeterminate",ta=t=>{const{className:a,value:e,label:s,state:r,onChangeState:n}=t,c=()=>{n(e,ea(r))};return o.jsxs("div",{className:I("flex items-center gap-2",a),children:[o.jsx("button",{"data-slot":"category-checkbox","data-state":r,onClick:c,className:I("peer border-input dark:bg-input/30  focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50","data-[state=include]:bg-primary data-[state=include]:text-primary-foreground data-[state=include]:border-primary","data-[state=exclude]:bg-primary data-[state=exclude]:text-primary-foreground data-[state=exclude]:border-primary"),children:o.jsxs("span",{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:[r==="include"&&o.jsx(Be,{className:"size-3.5"}),r==="exclude"&&o.jsx(Ut,{className:"size-3.5"})]})}),s]})},ra=t=>{const{className:a,include:e,exclude:s,onChangeInclude:r,onChangeExclude:n,checkboxes:c}=t,l=(h,p)=>{switch(p){case"include":r(e.concat(h));return;case"exclude":r(e.filter(x=>x!==h)),n(s.concat(h));return;default:n(s.filter(x=>x!==h));return}},d=h=>e.includes(h)?"include":s.includes(h)?"exclude":"indeterminate";return o.jsx("div",{className:a,children:c.map(h=>o.jsx(ta,{label:h.label,value:h.value,state:d(h.value),onChangeState:l,className:"px-2 py-1.5"},h.value))})},qa=u.memo(ra);function sa(t){const{data:a,refetch:e}=Ne({queryKey:["genres"],queryFn:async()=>await De.GET("/manga/genres",{params:{query:{search:t}}}).then(s=>{var r;return((r=s.data)==null?void 0:r.data)||[]})});return{data:a,refetch:e}}function Ha(t){const[a,e]=u.useState(""),{data:s,refetch:r}=sa(a),n=t.genres(),c=t.notGenres(),l=t.setGenres(),d=t.setNotGenres(),h=t.resetGenres(),p=Re(()=>r(),500),x=u.useCallback(v=>{e(v),p()},[p,e]);return{genres:{checkboxes:u.useMemo(()=>s.map(v=>({label:v.title,value:v.id})),[s]),include:n,exclude:c,onChangeInclude:l,onChangeExclude:d},resetGenres:h,searchGenres:{value:a,onChangeValue:x}}}function aa(t){const{data:a,refetch:e}=Ne({queryKey:["tags"],queryFn:async()=>await De.GET("/manga/tags",{params:{query:{search:t}}}).then(s=>{var r;return((r=s.data)==null?void 0:r.data)||[]})});return{data:a,refetch:e}}function Ga(t){const[a,e]=u.useState(""),{data:s,refetch:r}=aa(a),n=t.tags(),c=t.notTags(),l=t.setTags(),d=t.setNotTags(),h=t.resetTags(),p=Re(()=>r(),500),x=u.useCallback(v=>{e(v),p()},[p,e]);return{tags:{checkboxes:u.useMemo(()=>s.map(v=>({label:v.title,value:v.id})),[s]),include:n,exclude:c,onChangeInclude:l,onChangeExclude:d},resetTags:h,searchTags:{value:a,onChangeValue:x}}}function na(t){const a=t.order(),e=t.setOrder();return{order:a,setOrder:e}}function oa(t){const a=t.sortBy(),e=t.setSortBy();return{sortBy:a,setSortBy:e}}const ca=t=>{const{className:a,order:e,setOrder:s,onApply:r}=t,n=c=>{s(c),r()};return o.jsxs(Me,{value:e,onValueChange:n,className:a,children:[o.jsx(re,{value:"asc",children:"asc"}),o.jsx(re,{value:"desc",children:"desc"})]})},ia=t=>{const{className:a,sortBy:e,setSortBy:s,onApply:r}=t,n=c=>{s(c),r()};return o.jsx(Me,{value:e,onValueChange:n,className:a,children:Object.values(ie).map(c=>o.jsx(re,{value:c,children:c},c))})},la=t=>{const{className:a,sortBy:e,order:s,orderValue:r,sortByValue:n}=t;return o.jsxs(Nt,{children:[o.jsx(Dt,{asChild:!0,children:o.jsxs($,{variant:"outline",size:"sm",className:a,children:[r==="desc"?o.jsx(Qt,{}):o.jsx(Lt,{}),n]})}),o.jsxs(Ft,{children:[e,o.jsx(Mt,{}),s]})]})},Ya=t=>{const{className:a}=t,{applyFilters:e}=tt(),s=Q.use,r=na(s),n=oa(s);return o.jsx(la,{className:a,orderValue:r.order,sortByValue:n.sortBy,sortBy:o.jsx(ia,{...n,onApply:e}),order:o.jsx(ca,{...r,onApply:e})})},ua=pr.and(xr).and(wr).and(ks).and(Cs).and(Ns).and(Fs).and(Rs).and(Ps).and(Is).and(Es).and(Bs).and(Hs);function Aa(){const[t,a]=u.useState(!1),{getAllSearchParams:e}=et(),s=Q.use.setInitialState(),r=Q.use.appliedFilters(),{applyFilters:n}=tt(()=>0,!1);return u.useCallback(()=>{if(t)return;a(!0);const l=e();if(Object.keys(l).length===0)return;const d=ua.parse(l);s(d),n()},[n,e,t,s])(),{appliedFilters:r}}export{Na as C,$s as D,Ya as M,Qs as R,Q as a,Da as b,Ma as c,ja as d,Pa as e,_a as f,Ia as g,Ra as h,Fa as i,Ha as j,Ga as k,Oa as l,qa as m,Js as n,Ea as o,Ba as p,Ls as q,Aa as r,tt as u};
