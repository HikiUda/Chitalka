import{f as g,d as j,p as h,j as s,c as f}from"./index-BBOIb04p.js";import{u as F,F as b,a,b as l,c as m,d as c,e as d,s as y}from"./form-m5SyGEi_.js";import{I as p}from"./input-COoXHJLR.js";import{B as S}from"./button-CBBu9zPz.js";import{o as C,s as u}from"./types-BAOhVOD-.js";import"./index-E9rGp8-C.js";const w=()=>{const n=g(),r=j(),{mutate:e,isPending:t}=h.useMutation("post","/auth/login",{onSuccess:o=>{r.login(o.tokens.access),n.invalidateQueries()}});return{login:o=>e({body:{...o}}),isPending:t}},I=C({login:u({message:"Логин обязателен"}).min(1,{message:"Логин должен быть не менее 1 символа"}),password:u({message:"Пароль обязателен"}).min(8,{message:"Пароль должен быть не менее 8 символов"})}),P=n=>{const{className:r}=n,e=F({resolver:y(I)}),{login:t,isPending:o}=w(),x=e.handleSubmit(t);return s.jsx(b,{...e,children:s.jsxs("form",{className:f("flex flex-col gap-2",r),onSubmit:x,children:[s.jsx(a,{control:e.control,name:"login",render:({field:i})=>s.jsxs(l,{children:[s.jsx(m,{children:"Логин"}),s.jsx(c,{children:s.jsx(p,{placeholder:"noname",...i})}),s.jsx(d,{})]})}),s.jsx(a,{control:e.control,name:"password",render:({field:i})=>s.jsxs(l,{children:[s.jsx(m,{children:"Пароль"}),s.jsx(c,{children:s.jsx(p,{type:"password",placeholder:"********",...i})}),s.jsx(d,{})]})}),s.jsx(S,{disabled:o,type:"submit",children:"Войти"})]})})};export{P as LoginFrom};
