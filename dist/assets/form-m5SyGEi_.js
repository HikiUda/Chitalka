import{o as x,r as ne,j as se,c as Ae}from"./index-BBOIb04p.js";import{S as Nt}from"./button-CBBu9zPz.js";import{R as Pt}from"./index-E9rGp8-C.js";var ge=e=>e.type==="checkbox",ae=e=>e instanceof Date,N=e=>e==null;const ut=e=>typeof e=="object";var R=e=>!N(e)&&!Array.isArray(e)&&ut(e)&&!ae(e),dt=e=>R(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,pt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ct=(e,r)=>e.has(pt(r)),Bt=e=>{const r=e.constructor&&e.constructor.prototype;return R(r)&&r.hasOwnProperty("isPrototypeOf")},Te=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function I(e){let r;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(Te&&(e instanceof Blob||i))&&(t||R(e)))if(r=t?[]:{},!t&&!Bt(e))r=e;else for(const n in e)e.hasOwnProperty(n)&&(r[n]=I(e[n]));else return e;return r}var we=e=>Array.isArray(e)?e.filter(Boolean):[],L=e=>e===void 0,y=(e,r,t)=>{if(!r||!R(e))return t;const i=we(r.split(/[,[\].]+?/)).reduce((n,o)=>N(n)?n:n[o],e);return L(i)||i===e?L(e[r])?t:e[r]:i},j=e=>typeof e=="boolean",Ie=e=>/^\w*$/.test(e),ft=e=>we(e.replace(/["|']|\]/g,"").split(/\.|\[/)),F=(e,r,t)=>{let i=-1;const n=Ie(r)?[r]:ft(r),o=n.length,u=o-1;for(;++i<o;){const c=n[i];let m=t;if(i!==u){const S=e[c];m=R(S)||Array.isArray(S)?S:isNaN(+n[i+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=m,e=e[c]}};const _e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},X={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},yt=x.createContext(null),Ee=()=>x.useContext(yt),jt=e=>{const{children:r,...t}=e;return x.createElement(yt.Provider,{value:t},r)};var gt=(e,r,t,i=!0)=>{const n={defaultValues:r._defaultValues};for(const o in e)Object.defineProperty(n,o,{get:()=>{const u=o;return r._proxyFormState[u]!==K.all&&(r._proxyFormState[u]=!i||K.all),t&&(t[u]=!0),e[u]}});return n};const Ue=typeof window<"u"?ne.useLayoutEffect:ne.useEffect;function ht(e){const r=Ee(),{control:t=r.control,disabled:i,name:n,exact:o}=e||{},[u,c]=x.useState(t._formState),m=x.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Ue(()=>t._subscribe({name:n,formState:m.current,exact:o,callback:S=>{!i&&c({...t._formState,...S})}}),[n,i,o]),x.useEffect(()=>{m.current.isValid&&t._setValid(!0)},[t]),x.useMemo(()=>gt(u,t,m.current,!1),[u,t])}var J=e=>typeof e=="string",mt=(e,r,t,i,n)=>J(e)?(i&&r.watch.add(e),y(t,e,n)):Array.isArray(e)?e.map(o=>(i&&r.watch.add(o),y(t,o))):(i&&(r.watchAll=!0),t);function $t(e){const r=Ee(),{control:t=r.control,name:i,defaultValue:n,disabled:o,exact:u}=e||{},c=x.useRef(n),[m,S]=x.useState(t._getWatch(i,c.current));return Ue(()=>t._subscribe({name:i,formState:{values:!0},exact:u,callback:V=>!o&&S(mt(i,t._names,V.values||t._formValues,!1,c.current))}),[i,t,o,u]),x.useEffect(()=>t._removeUnmounted()),m}function qt(e){const r=Ee(),{name:t,disabled:i,control:n=r.control,shouldUnregister:o}=e,u=ct(n._names.array,t),c=$t({control:n,name:t,defaultValue:y(n._formValues,t,y(n._defaultValues,t,e.defaultValue)),exact:!0}),m=ht({control:n,name:t,exact:!0}),S=x.useRef(e),V=x.useRef(n.register(t,{...e.rules,value:c,...j(e.disabled)?{disabled:e.disabled}:{}})),D=x.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(m.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(m.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(m.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(m.validatingFields,t)},error:{enumerable:!0,get:()=>y(m.errors,t)}}),[m,t]),v=x.useCallback(C=>V.current.onChange({target:{value:dt(C),name:t},type:_e.CHANGE}),[t]),Z=x.useCallback(()=>V.current.onBlur({target:{value:y(n._formValues,t),name:t},type:_e.BLUR}),[t,n._formValues]),q=x.useCallback(C=>{const Q=y(n._fields,t);Q&&C&&(Q._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:b=>C.setCustomValidity(b),reportValidity:()=>C.reportValidity()})},[n._fields,t]),k=x.useMemo(()=>({name:t,value:c,...j(i)||m.disabled?{disabled:m.disabled||i}:{},onChange:v,onBlur:Z,ref:q}),[t,i,m.disabled,v,Z,q,c]);return x.useEffect(()=>{const C=n._options.shouldUnregister||o;n.register(t,{...S.current.rules,...j(S.current.disabled)?{disabled:S.current.disabled}:{}});const Q=(b,W)=>{const P=y(n._fields,b);P&&P._f&&(P._f.mount=W)};if(Q(t,!0),C){const b=I(y(n._options.defaultValues,t));F(n._defaultValues,t,b),L(y(n._formValues,t))&&F(n._formValues,t,b)}return!u&&n.register(t),()=>{(u?C&&!n._state.action:C)?n.unregister(t):Q(t,!1)}},[t,n,u,o]),x.useEffect(()=>{n._setDisabledField({disabled:i,name:t})},[i,t,n]),x.useMemo(()=>({field:k,formState:m,fieldState:D}),[k,m,D])}const Wt=e=>e.render(qt(e));var vt=(e,r,t,i,n)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:n||!0}}:{},fe=e=>Array.isArray(e)?e:[e],Je=()=>{let e=[];return{get observers(){return e},next:n=>{for(const o of e)o.next&&o.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(o=>o!==n)}}),unsubscribe:()=>{e=[]}}},Me=e=>N(e)||!ut(e);function re(e,r){if(Me(e)||Me(r))return e===r;if(ae(e)&&ae(r))return e.getTime()===r.getTime();const t=Object.keys(e),i=Object.keys(r);if(t.length!==i.length)return!1;for(const n of t){const o=e[n];if(!i.includes(n))return!1;if(n!=="ref"){const u=r[n];if(ae(o)&&ae(u)||R(o)&&R(u)||Array.isArray(o)&&Array.isArray(u)?!re(o,u):o!==u)return!1}}return!0}var B=e=>R(e)&&!Object.keys(e).length,Ne=e=>e.type==="file",z=e=>typeof e=="function",Ve=e=>{if(!Te)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},bt=e=>e.type==="select-multiple",Pe=e=>e.type==="radio",Ht=e=>Pe(e)||ge(e),Re=e=>Ve(e)&&e.isConnected;function Kt(e,r){const t=r.slice(0,-1).length;let i=0;for(;i<t;)e=L(e)?i++:e[r[i++]];return e}function zt(e){for(const r in e)if(e.hasOwnProperty(r)&&!L(e[r]))return!1;return!0}function T(e,r){const t=Array.isArray(r)?r:Ie(r)?[r]:ft(r),i=t.length===1?e:Kt(e,t),n=t.length-1,o=t[n];return i&&delete i[o],n!==0&&(R(i)&&B(i)||Array.isArray(i)&&zt(i))&&T(e,t.slice(0,-1)),e}var _t=e=>{for(const r in e)if(z(e[r]))return!0;return!1};function Fe(e,r={}){const t=Array.isArray(e);if(R(e)||t)for(const i in e)Array.isArray(e[i])||R(e[i])&&!_t(e[i])?(r[i]=Array.isArray(e[i])?[]:{},Fe(e[i],r[i])):N(e[i])||(r[i]=!0);return r}function Vt(e,r,t){const i=Array.isArray(e);if(R(e)||i)for(const n in e)Array.isArray(e[n])||R(e[n])&&!_t(e[n])?L(r)||Me(t[n])?t[n]=Array.isArray(e[n])?Fe(e[n],[]):{...Fe(e[n])}:Vt(e[n],N(r)?{}:r[n],t[n]):t[n]=!re(e[n],r[n]);return t}var de=(e,r)=>Vt(e,r,Fe(r));const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var Ft=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!L(e[0].attributes.value)?L(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe},xt=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:i})=>L(e)?e:r?e===""?NaN:e&&+e:t&&J(e)?new Date(e):i?i(e):e;const Ze={isValid:!1,value:null};var At=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,Ze):Ze;function et(e){const r=e.ref;return Ne(r)?r.files:Pe(r)?At(e.refs).value:bt(r)?[...r.selectedOptions].map(({value:t})=>t):ge(r)?Ft(e.refs).value:xt(L(r.value)?e.ref.value:r.value,e)}var Gt=(e,r,t,i)=>{const n={};for(const o of e){const u=y(r,o);u&&F(n,o,u._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:i}},xe=e=>e instanceof RegExp,ce=e=>L(e)?e:xe(e)?e.source:R(e)?xe(e.value)?e.value.source:e.value:e,tt=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched});const rt="AsyncFunction";var Yt=e=>!!e&&!!e.validate&&!!(z(e.validate)&&e.validate.constructor.name===rt||R(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===rt)),Jt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),st=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ye=(e,r,t,i)=>{for(const n of t||Object.keys(e)){const o=y(e,n);if(o){const{_f:u,...c}=o;if(u){if(u.refs&&u.refs[0]&&r(u.refs[0],n)&&!i)return!0;if(u.ref&&r(u.ref,u.name)&&!i)return!0;if(ye(c,r))break}else if(R(c)&&ye(c,r))break}}};function it(e,r,t){const i=y(e,t);if(i||Ie(t))return{error:i,name:t};const n=t.split(".");for(;n.length;){const o=n.join("."),u=y(r,o),c=y(e,o);if(u&&!Array.isArray(u)&&t!==o)return{name:t};if(c&&c.type)return{name:o,error:c};if(c&&c.root&&c.root.type)return{name:`${o}.root`,error:c.root};n.pop()}return{name:t}}var Qt=(e,r,t,i)=>{t(e);const{name:n,...o}=e;return B(o)||Object.keys(o).length>=Object.keys(r).length||Object.keys(o).find(u=>r[u]===(!i||K.all))},Xt=(e,r,t)=>!e||!r||e===r||fe(e).some(i=>i&&(t?i===r:i.startsWith(r)||r.startsWith(i))),Zt=(e,r,t,i,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(r||e):(t?i.isOnBlur:n.isOnBlur)?!e:(t?i.isOnChange:n.isOnChange)?e:!0,er=(e,r)=>!we(y(e,r)).length&&T(e,r),tr=(e,r,t)=>{const i=fe(y(e,t));return F(i,"root",r[t]),F(e,t,i),e},be=e=>J(e);function at(e,r,t="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||j(e)&&!e)return{type:t,message:be(e)?e:"",ref:r}}var le=e=>R(e)&&!xe(e)?e:{value:e,message:""},nt=async(e,r,t,i,n,o)=>{const{ref:u,refs:c,required:m,maxLength:S,minLength:V,min:D,max:v,pattern:Z,validate:q,name:k,valueAsNumber:C,mount:Q}=e._f,b=y(t,k);if(!Q||r.has(k))return{};const W=c?c[0]:u,P=_=>{n&&W.reportValidity&&(W.setCustomValidity(j(_)?"":_||""),W.reportValidity())},M={},he=Pe(u),ee=ge(u),Se=he||ee,H=(C||Ne(u))&&L(u.value)&&L(b)||Ve(u)&&u.value===""||b===""||Array.isArray(b)&&!b.length,ie=vt.bind(null,k,i,M),G=(_,w,O,U=X.maxLength,p=X.minLength)=>{const Y=_?w:O;M[k]={type:_?U:p,message:Y,ref:u,...ie(_?U:p,Y)}};if(o?!Array.isArray(b)||!b.length:m&&(!Se&&(H||N(b))||j(b)&&!b||ee&&!Ft(c).isValid||he&&!At(c).isValid)){const{value:_,message:w}=be(m)?{value:!!m,message:m}:le(m);if(_&&(M[k]={type:X.required,message:w,ref:W,...ie(X.required,w)},!i))return P(w),M}if(!H&&(!N(D)||!N(v))){let _,w;const O=le(v),U=le(D);if(!N(b)&&!isNaN(b)){const p=u.valueAsNumber||b&&+b;N(O.value)||(_=p>O.value),N(U.value)||(w=p<U.value)}else{const p=u.valueAsDate||new Date(b),Y=me=>new Date(new Date().toDateString()+" "+me),ue=u.type=="time",oe=u.type=="week";J(O.value)&&b&&(_=ue?Y(b)>Y(O.value):oe?b>O.value:p>new Date(O.value)),J(U.value)&&b&&(w=ue?Y(b)<Y(U.value):oe?b<U.value:p<new Date(U.value))}if((_||w)&&(G(!!_,O.message,U.message,X.max,X.min),!i))return P(M[k].message),M}if((S||V)&&!H&&(J(b)||o&&Array.isArray(b))){const _=le(S),w=le(V),O=!N(_.value)&&b.length>+_.value,U=!N(w.value)&&b.length<+w.value;if((O||U)&&(G(O,_.message,w.message),!i))return P(M[k].message),M}if(Z&&!H&&J(b)){const{value:_,message:w}=le(Z);if(xe(_)&&!b.match(_)&&(M[k]={type:X.pattern,message:w,ref:u,...ie(X.pattern,w)},!i))return P(w),M}if(q){if(z(q)){const _=await q(b,t),w=at(_,W);if(w&&(M[k]={...w,...ie(X.validate,w.message)},!i))return P(w.message),M}else if(R(q)){let _={};for(const w in q){if(!B(_)&&!i)break;const O=at(await q[w](b,t),W,w);O&&(_={...O,...ie(w,O.message)},P(O.message),i&&(M[k]=_))}if(!B(_)&&(M[k]={ref:W,..._},!i))return M}}return P(!0),M};const rr={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function sr(e={}){let r={...rr,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:z(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1};const i={};let n=R(r.defaultValues)||R(r.values)?I(r.defaultValues||r.values)||{}:{},o=r.shouldUnregister?{}:I(n),u={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},m,S=0;const V={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let D={...V};const v={array:Je(),state:Je()},Z=r.criteriaMode===K.all,q=s=>a=>{clearTimeout(S),S=setTimeout(s,a)},k=async s=>{if(!r.disabled&&(V.isValid||D.isValid||s)){const a=r.resolver?B((await ee()).errors):await H(i,!0);a!==t.isValid&&v.state.next({isValid:a})}},C=(s,a)=>{!r.disabled&&(V.isValidating||V.validatingFields||D.isValidating||D.validatingFields)&&((s||Array.from(c.mount)).forEach(l=>{l&&(a?F(t.validatingFields,l,a):T(t.validatingFields,l))}),v.state.next({validatingFields:t.validatingFields,isValidating:!B(t.validatingFields)}))},Q=(s,a=[],l,g,f=!0,d=!0)=>{if(g&&l&&!r.disabled){if(u.action=!0,d&&Array.isArray(y(i,s))){const h=l(y(i,s),g.argA,g.argB);f&&F(i,s,h)}if(d&&Array.isArray(y(t.errors,s))){const h=l(y(t.errors,s),g.argA,g.argB);f&&F(t.errors,s,h),er(t.errors,s)}if((V.touchedFields||D.touchedFields)&&d&&Array.isArray(y(t.touchedFields,s))){const h=l(y(t.touchedFields,s),g.argA,g.argB);f&&F(t.touchedFields,s,h)}(V.dirtyFields||D.dirtyFields)&&(t.dirtyFields=de(n,o)),v.state.next({name:s,isDirty:G(s,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else F(o,s,a)},b=(s,a)=>{F(t.errors,s,a),v.state.next({errors:t.errors})},W=s=>{t.errors=s,v.state.next({errors:t.errors,isValid:!1})},P=(s,a,l,g)=>{const f=y(i,s);if(f){const d=y(o,s,L(l)?y(n,s):l);L(d)||g&&g.defaultChecked||a?F(o,s,a?d:et(f._f)):O(s,d),u.mount&&k()}},M=(s,a,l,g,f)=>{let d=!1,h=!1;const A={name:s};if(!r.disabled){if(!l||g){(V.isDirty||D.isDirty)&&(h=t.isDirty,t.isDirty=A.isDirty=G(),d=h!==A.isDirty);const E=re(y(n,s),a);h=!!y(t.dirtyFields,s),E?T(t.dirtyFields,s):F(t.dirtyFields,s,!0),A.dirtyFields=t.dirtyFields,d=d||(V.dirtyFields||D.dirtyFields)&&h!==!E}if(l){const E=y(t.touchedFields,s);E||(F(t.touchedFields,s,l),A.touchedFields=t.touchedFields,d=d||(V.touchedFields||D.touchedFields)&&E!==l)}d&&f&&v.state.next(A)}return d?A:{}},he=(s,a,l,g)=>{const f=y(t.errors,s),d=(V.isValid||D.isValid)&&j(a)&&t.isValid!==a;if(r.delayError&&l?(m=q(()=>b(s,l)),m(r.delayError)):(clearTimeout(S),m=null,l?F(t.errors,s,l):T(t.errors,s)),(l?!re(f,l):f)||!B(g)||d){const h={...g,...d&&j(a)?{isValid:a}:{},errors:t.errors,name:s};t={...t,...h},v.state.next(h)}},ee=async s=>{C(s,!0);const a=await r.resolver(o,r.context,Gt(s||c.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return C(s),a},Se=async s=>{const{errors:a}=await ee(s);if(s)for(const l of s){const g=y(a,l);g?F(t.errors,l,g):T(t.errors,l)}else t.errors=a;return a},H=async(s,a,l={valid:!0})=>{for(const g in s){const f=s[g];if(f){const{_f:d,...h}=f;if(d){const A=c.array.has(d.name),E=f._f&&Yt(f._f);E&&V.validatingFields&&C([g],!0);const $=await nt(f,c.disabled,o,Z,r.shouldUseNativeValidation&&!a,A);if(E&&V.validatingFields&&C([g]),$[d.name]&&(l.valid=!1,a))break;!a&&(y($,d.name)?A?tr(t.errors,$,d.name):F(t.errors,d.name,$[d.name]):T(t.errors,d.name))}!B(h)&&await H(h,a,l)}}return l.valid},ie=()=>{for(const s of c.unMount){const a=y(i,s);a&&(a._f.refs?a._f.refs.every(l=>!Re(l)):!Re(a._f.ref))&&De(s)}c.unMount=new Set},G=(s,a)=>!r.disabled&&(s&&a&&F(o,s,a),!re(me(),n)),_=(s,a,l)=>mt(s,c,{...u.mount?o:L(a)?n:J(s)?{[s]:a}:a},l,a),w=s=>we(y(u.mount?o:n,s,r.shouldUnregister?y(n,s,[]):[])),O=(s,a,l={})=>{const g=y(i,s);let f=a;if(g){const d=g._f;d&&(!d.disabled&&F(o,s,xt(a,d)),f=Ve(d.ref)&&N(a)?"":a,bt(d.ref)?[...d.ref.options].forEach(h=>h.selected=f.includes(h.value)):d.refs?ge(d.ref)?d.refs.forEach(h=>{(!h.defaultChecked||!h.disabled)&&(Array.isArray(f)?h.checked=!!f.find(A=>A===h.value):h.checked=f===h.value||!!f)}):d.refs.forEach(h=>h.checked=h.value===f):Ne(d.ref)?d.ref.value="":(d.ref.value=f,d.ref.type||v.state.next({name:s,values:I(o)})))}(l.shouldDirty||l.shouldTouch)&&M(s,f,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&oe(s)},U=(s,a,l)=>{for(const g in a){if(!a.hasOwnProperty(g))return;const f=a[g],d=s+"."+g,h=y(i,d);(c.array.has(s)||R(f)||h&&!h._f)&&!ae(f)?U(d,f,l):O(d,f,l)}},p=(s,a,l={})=>{const g=y(i,s),f=c.array.has(s),d=I(a);F(o,s,d),f?(v.array.next({name:s,values:I(o)}),(V.isDirty||V.dirtyFields||D.isDirty||D.dirtyFields)&&l.shouldDirty&&v.state.next({name:s,dirtyFields:de(n,o),isDirty:G(s,d)})):g&&!g._f&&!N(d)?U(s,d,l):O(s,d,l),st(s,c)&&v.state.next({...t}),v.state.next({name:u.mount?s:void 0,values:I(o)})},Y=async s=>{u.mount=!0;const a=s.target;let l=a.name,g=!0;const f=y(i,l),d=E=>{g=Number.isNaN(E)||ae(E)&&isNaN(E.getTime())||re(E,y(o,l,E))},h=tt(r.mode),A=tt(r.reValidateMode);if(f){let E,$;const ve=a.type?et(f._f):dt(s),te=s.type===_e.BLUR||s.type===_e.FOCUS_OUT,Tt=!Jt(f._f)&&!r.resolver&&!y(t.errors,l)&&!f._f.deps||Zt(te,y(t.touchedFields,l),t.isSubmitted,A,h),Oe=st(l,c,te);F(o,l,ve),te?(f._f.onBlur&&f._f.onBlur(s),m&&m(0)):f._f.onChange&&f._f.onChange(s);const Le=M(l,ve,te),It=!B(Le)||Oe;if(!te&&v.state.next({name:l,type:s.type,values:I(o)}),Tt)return(V.isValid||D.isValid)&&(r.mode==="onBlur"?te&&k():te||k()),It&&v.state.next({name:l,...Oe?{}:Le});if(!te&&Oe&&v.state.next({...t}),r.resolver){const{errors:Ge}=await ee([l]);if(d(ve),g){const Ut=it(t.errors,i,l),Ye=it(Ge,i,Ut.name||l);E=Ye.error,l=Ye.name,$=B(Ge)}}else C([l],!0),E=(await nt(f,c.disabled,o,Z,r.shouldUseNativeValidation))[l],C([l]),d(ve),g&&(E?$=!1:(V.isValid||D.isValid)&&($=await H(i,!0)));g&&(f._f.deps&&oe(f._f.deps),he(l,$,E,Le))}},ue=(s,a)=>{if(y(t.errors,a)&&s.focus)return s.focus(),1},oe=async(s,a={})=>{let l,g;const f=fe(s);if(r.resolver){const d=await Se(L(s)?s:f);l=B(d),g=s?!f.some(h=>y(d,h)):l}else s?(g=(await Promise.all(f.map(async d=>{const h=y(i,d);return await H(h&&h._f?{[d]:h}:h)}))).every(Boolean),!(!g&&!t.isValid)&&k()):g=l=await H(i);return v.state.next({...!J(s)||(V.isValid||D.isValid)&&l!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:l}:{},errors:t.errors}),a.shouldFocus&&!g&&ye(i,ue,s?f:c.mount),g},me=s=>{const a={...u.mount?o:n};return L(s)?a:J(s)?y(a,s):s.map(l=>y(a,l))},Be=(s,a)=>({invalid:!!y((a||t).errors,s),isDirty:!!y((a||t).dirtyFields,s),error:y((a||t).errors,s),isValidating:!!y(t.validatingFields,s),isTouched:!!y((a||t).touchedFields,s)}),Dt=s=>{s&&fe(s).forEach(a=>T(t.errors,a)),v.state.next({errors:s?t.errors:{}})},je=(s,a,l)=>{const g=(y(i,s,{_f:{}})._f||{}).ref,f=y(t.errors,s)||{},{ref:d,message:h,type:A,...E}=f;F(t.errors,s,{...E,...a,ref:g}),v.state.next({name:s,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&g&&g.focus&&g.focus()},kt=(s,a)=>z(s)?v.state.subscribe({next:l=>s(_(void 0,a),l)}):_(s,a,!0),$e=s=>v.state.subscribe({next:a=>{Xt(s.name,a.name,s.exact)&&Qt(a,s.formState||V,Mt,s.reRenderRoot)&&s.callback({values:{...o},...t,...a})}}).unsubscribe,Ct=s=>(u.mount=!0,D={...D,...s.formState},$e({...s,formState:D})),De=(s,a={})=>{for(const l of s?fe(s):c.mount)c.mount.delete(l),c.array.delete(l),a.keepValue||(T(i,l),T(o,l)),!a.keepError&&T(t.errors,l),!a.keepDirty&&T(t.dirtyFields,l),!a.keepTouched&&T(t.touchedFields,l),!a.keepIsValidating&&T(t.validatingFields,l),!r.shouldUnregister&&!a.keepDefaultValue&&T(n,l);v.state.next({values:I(o)}),v.state.next({...t,...a.keepDirty?{isDirty:G()}:{}}),!a.keepIsValid&&k()},qe=({disabled:s,name:a})=>{(j(s)&&u.mount||s||c.disabled.has(a))&&(s?c.disabled.add(a):c.disabled.delete(a))},ke=(s,a={})=>{let l=y(i,s);const g=j(a.disabled)||j(r.disabled);return F(i,s,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:s}},name:s,mount:!0,...a}}),c.mount.add(s),l?qe({disabled:j(a.disabled)?a.disabled:r.disabled,name:s}):P(s,!0,a.value),{...g?{disabled:a.disabled||r.disabled}:{},...r.progressive?{required:!!a.required,min:ce(a.min),max:ce(a.max),minLength:ce(a.minLength),maxLength:ce(a.maxLength),pattern:ce(a.pattern)}:{},name:s,onChange:Y,onBlur:Y,ref:f=>{if(f){ke(s,a),l=y(i,s);const d=L(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,h=Ht(d),A=l._f.refs||[];if(h?A.find(E=>E===d):d===l._f.ref)return;F(i,s,{_f:{...l._f,...h?{refs:[...A.filter(Re),d,...Array.isArray(y(n,s))?[{}]:[]],ref:{type:d.type,name:s}}:{ref:d}}}),P(s,!1,void 0,d)}else l=y(i,s,{}),l._f&&(l._f.mount=!1),(r.shouldUnregister||a.shouldUnregister)&&!(ct(c.array,s)&&u.action)&&c.unMount.add(s)}}},Ce=()=>r.shouldFocusError&&ye(i,ue,c.mount),Ot=s=>{j(s)&&(v.state.next({disabled:s}),ye(i,(a,l)=>{const g=y(i,l);g&&(a.disabled=g._f.disabled||s,Array.isArray(g._f.refs)&&g._f.refs.forEach(f=>{f.disabled=g._f.disabled||s}))},0,!1))},We=(s,a)=>async l=>{let g;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let f=I(o);if(v.state.next({isSubmitting:!0}),r.resolver){const{errors:d,values:h}=await ee();t.errors=d,f=h}else await H(i);if(c.disabled.size)for(const d of c.disabled)F(f,d,void 0);if(T(t.errors,"root"),B(t.errors)){v.state.next({errors:{}});try{await s(f,l)}catch(d){g=d}}else a&&await a({...t.errors},l),Ce(),setTimeout(Ce);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:B(t.errors)&&!g,submitCount:t.submitCount+1,errors:t.errors}),g)throw g},Lt=(s,a={})=>{y(i,s)&&(L(a.defaultValue)?p(s,I(y(n,s))):(p(s,a.defaultValue),F(n,s,I(a.defaultValue))),a.keepTouched||T(t.touchedFields,s),a.keepDirty||(T(t.dirtyFields,s),t.isDirty=a.defaultValue?G(s,I(y(n,s))):G()),a.keepError||(T(t.errors,s),V.isValid&&k()),v.state.next({...t}))},He=(s,a={})=>{const l=s?I(s):n,g=I(l),f=B(s),d=f?n:g;if(a.keepDefaultValues||(n=l),!a.keepValues){if(a.keepDirtyValues){const h=new Set([...c.mount,...Object.keys(de(n,o))]);for(const A of Array.from(h))y(t.dirtyFields,A)?F(d,A,y(o,A)):p(A,y(d,A))}else{if(Te&&L(s))for(const h of c.mount){const A=y(i,h);if(A&&A._f){const E=Array.isArray(A._f.refs)?A._f.refs[0]:A._f.ref;if(Ve(E)){const $=E.closest("form");if($){$.reset();break}}}}for(const h of c.mount)p(h,y(d,h))}o=I(d),v.array.next({values:{...d}}),v.state.next({values:{...d}})}c={mount:a.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!V.isValid||!!a.keepIsValid||!!a.keepDirtyValues,u.watch=!!r.shouldUnregister,v.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:f?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!re(s,n)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:a.keepDirtyValues?a.keepDefaultValues&&o?de(n,o):t.dirtyFields:a.keepDefaultValues&&s?de(n,s):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ke=(s,a)=>He(z(s)?s(o):s,a),Rt=(s,a={})=>{const l=y(i,s),g=l&&l._f;if(g){const f=g.refs?g.refs[0]:g.ref;f.focus&&(f.focus(),a.shouldSelect&&z(f.select)&&f.select())}},Mt=s=>{t={...t,...s}},ze={control:{register:ke,unregister:De,getFieldState:Be,handleSubmit:We,setError:je,_subscribe:$e,_runSchema:ee,_focusError:Ce,_getWatch:_,_getDirty:G,_setValid:k,_setFieldArray:Q,_setDisabledField:qe,_setErrors:W,_getFieldArray:w,_reset:He,_resetDefaultValues:()=>z(r.defaultValues)&&r.defaultValues().then(s=>{Ke(s,r.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:ie,_disableForm:Ot,_subjects:v,_proxyFormState:V,get _fields(){return i},get _formValues(){return o},get _state(){return u},set _state(s){u=s},get _defaultValues(){return n},get _names(){return c},set _names(s){c=s},get _formState(){return t},get _options(){return r},set _options(s){r={...r,...s}}},subscribe:Ct,trigger:oe,register:ke,handleSubmit:We,watch:kt,setValue:p,getValues:me,reset:Ke,resetField:Lt,clearErrors:Dt,unregister:De,setError:je,setFocus:Rt,getFieldState:Be};return{...ze,formControl:ze}}function fr(e={}){const r=x.useRef(void 0),t=x.useRef(void 0),[i,n]=x.useState({isDirty:!1,isValidating:!1,isLoading:z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:z(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...e.formControl?e.formControl:sr(e),formState:i},e.formControl&&e.defaultValues&&!z(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const o=r.current.control;return o._options=e,Ue(()=>{const u=o._subscribe({formState:o._proxyFormState,callback:()=>n({...o._formState}),reRenderRoot:!0});return n(c=>({...c,isReady:!0})),o._formState.isReady=!0,u},[o]),x.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),x.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),x.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),x.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),x.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==i.isDirty&&o._subjects.state.next({isDirty:u})}},[o,i.isDirty]),x.useEffect(()=>{e.values&&!re(e.values,t.current)?(o._reset(e.values,o._options.resetOptions),t.current=e.values,n(u=>({...u}))):o._resetDefaultValues()},[o,e.values]),x.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),r.current.formState=gt(i,o),r.current}const ot=(e,r,t)=>{if(e&&"reportValidity"in e){const i=y(t,r);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},wt=(e,r)=>{for(const t in r.fields){const i=r.fields[t];i&&i.ref&&"reportValidity"in i.ref?ot(i.ref,t,e):i&&i.refs&&i.refs.forEach(n=>ot(n,t,e))}},ir=(e,r)=>{r.shouldUseNativeValidation&&wt(e,r);const t={};for(const i in e){const n=y(r.fields,i),o=Object.assign(e[i]||{},{ref:n&&n.ref});if(ar(r.names||Object.keys(e),i)){const u=Object.assign({},y(t,i));F(u,"root",o),F(t,i,u)}else F(t,i,o)}return t},ar=(e,r)=>{const t=lt(r);return e.some(i=>lt(i).match(`^${t}\\.\\d+`))};function lt(e){return e.replace(/\]|\[/g,"")}function nr(e,r){for(var t={};e.length;){var i=e[0],n=i.code,o=i.message,u=i.path.join(".");if(!t[u])if("unionErrors"in i){var c=i.unionErrors[0].errors[0];t[u]={message:c.message,type:c.code}}else t[u]={message:o,type:n};if("unionErrors"in i&&i.unionErrors.forEach(function(V){return V.errors.forEach(function(D){return e.push(D)})}),r){var m=t[u].types,S=m&&m[i.code];t[u]=vt(u,r,t,n,S?[].concat(S,i.message):i.message)}e.shift()}return t}function yr(e,r,t){return t===void 0&&(t={}),function(i,n,o){try{return Promise.resolve(function(u,c){try{var m=Promise.resolve(e[t.mode==="sync"?"parse":"parseAsync"](i,r)).then(function(S){return o.shouldUseNativeValidation&&wt({},o),{errors:{},values:t.raw?Object.assign({},i):S}})}catch(S){return c(S)}return m&&m.then?m.then(void 0,c):m}(0,function(u){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(u))return{values:{},errors:ir(nr(u.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}}}function or({className:e,...r}){return se.jsx(Pt,{"data-slot":"label",className:Ae("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}const gr=jt,Et=ne.createContext({}),hr=({...e})=>se.jsx(Et.Provider,{value:{name:e.name},children:se.jsx(Wt,{...e})}),pe=()=>{const e=ne.useContext(Et),r=ne.useContext(St),{getFieldState:t}=Ee(),i=ht({name:e.name}),n=t(e.name,i);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=r;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...n}},St=ne.createContext({});function mr({className:e,...r}){const t=ne.useId();return se.jsx(St.Provider,{value:{id:t},children:se.jsx("div",{"data-slot":"form-item",className:Ae("grid gap-2",e),...r})})}function vr({className:e,...r}){const{error:t,formItemId:i}=pe();return se.jsx(or,{"data-slot":"form-label","data-error":!!t,className:Ae("data-[error=true]:text-destructive",e),htmlFor:i,...r})}function br({...e}){const{error:r,formItemId:t,formDescriptionId:i,formMessageId:n}=pe();return se.jsx(Nt,{"data-slot":"form-control",id:t,"aria-describedby":r?`${i} ${n}`:`${i}`,"aria-invalid":!!r,...e})}function _r({className:e,...r}){const{error:t,formMessageId:i}=pe(),n=t?String((t==null?void 0:t.message)??""):r.children;return n?se.jsx("p",{"data-slot":"form-message",id:i,className:Ae("text-destructive text-sm",e),...r,children:n}):null}export{gr as F,hr as a,mr as b,vr as c,br as d,_r as e,yr as s,fr as u};
