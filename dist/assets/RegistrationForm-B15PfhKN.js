import{f as u,d as g,p as h,j as s,c as f}from"./index-BBOIb04p.js";import{u as F,F as b,a,b as c,c as l,d as m,e as d,s as y}from"./form-m5SyGEi_.js";import{I as p}from"./input-COoXHJLR.js";import{B as w}from"./button-CBBu9zPz.js";import{o as P,s as x}from"./types-BAOhVOD-.js";import"./index-E9rGp8-C.js";const S=()=>{const o=u(),r=g(),{mutate:e,isPending:i}=h.useMutation("post","/auth/registration",{onSuccess:n=>{r.login(n.tokens.access),o.invalidateQueries()}});return{login:n=>e({body:{...n}}),isPending:i}},C=P({login:x({message:"Логин обязателен"}).min(1,{message:"Логин должен быть не менее 1 символа"}),password:x({message:"Пароль обязателен"}).min(8,{message:"Пароль должен быть не менее 8 символов"}),confirmPassword:x().optional()}).refine(({password:o,confirmPassword:r})=>o===r,{path:["confirmPassword"],message:"Пароли не совпадают"}),N=o=>{const{className:r}=o,e=F({resolver:y(C)}),{login:i,isPending:n}=S(),j=e.handleSubmit(i);return s.jsx(b,{...e,children:s.jsxs("form",{className:f("flex flex-col gap-2",r),onSubmit:j,children:[s.jsx(a,{control:e.control,name:"login",render:({field:t})=>s.jsxs(c,{children:[s.jsx(l,{children:"Логин"}),s.jsx(m,{children:s.jsx(p,{placeholder:"noname",...t})}),s.jsx(d,{})]})}),s.jsx(a,{control:e.control,name:"password",render:({field:t})=>s.jsxs(c,{children:[s.jsx(l,{children:"Пароль"}),s.jsx(m,{children:s.jsx(p,{type:"password",placeholder:"********",...t})}),s.jsx(d,{})]})}),s.jsx(a,{control:e.control,name:"confirmPassword",render:({field:t})=>s.jsxs(c,{children:[s.jsx(l,{children:"Подтвердите пароль"}),s.jsx(m,{children:s.jsx(p,{type:"password",placeholder:"********",...t})}),s.jsx(d,{})]})}),s.jsx(w,{disabled:n,type:"submit",children:"Зарегестрироваться"})]})})};export{N as RegistrationForm};
